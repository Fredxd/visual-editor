"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[766],{7766:function(e,t,n){n.r(t);var r,a,i,l,o,c=n(3545),u=n(5921),s=n(2210),d=n(9155),f=n(5654),m=n(1610),v=n(7318),p=n(2186),h=n(9231),g=n(4151),b=n(4045),_=n(5592),E=n(5224),w=n(327),y=n(1506),k=n(4391),C=n(5015),x=n(8015),N=n(4412),z=n(1813),B=n(8190),L=n(6054),M=n(2740),S=n(7714),P=n(4259),Z=n(4110),T=["children","icon","size","secondary","className"],A=["children","className","danger","success","rotate","title"],R=["className"],O=["children","label","help","type","options","tooltip","icon"],H=["as","between","gap","children","className","column","style"],j=["item","children","className"],I=["data","size"],F=Object.defineProperty,U=function(e,t,n){return function(e,t,n){t in e?F(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=typeof t?t+"":t,n),n},V="_Button_ekinv_1",D="_ButtonSecondary_ekinv_23",W="_ButtonSmall_ekinv_31",q="_ButtonIcon_ekinv_35",J="_ButtonIconDanger_ekinv_56",Y="_ButtonIconSuccess_ekinv_64";function G(e){var t=e.children,n=e.icon,r=e.size,a=void 0===r?"default":r,i=e.secondary,l=void 0!==i&&i,o=e.className,c=(0,v.Z)(e,T);return h.createElement("button",Object.assign({className:(0,y.Z)(V,l&&D,"small"===a&&W,o)},c),n&&h.createElement(n,{size:20}),t)}var K="_Tooltip_fhhr6_1";function X(e){var t=e.content,n=e.children,r=e.visible,a=e.trigger,i={};return"click"===a&&(i.trigger=a,i.hideOnClick=!0,i.interactive=!0),h.createElement(k.ZP,Object.assign({content:t,visible:r},i,{className:K}),n)}function $(e){var t=e.children,n=e.className,r=e.danger,a=e.success,i=e.rotate,l=e.title,o=(0,v.Z)(e,A),c=i?{transform:"rotate("+i+"deg)"}:void 0,u=h.createElement("button",Object.assign({},o,{className:(0,y.Z)(q,r&&J,a&&Y,n),style:c}),t);return l?h.createElement(X,{content:l,trigger:"focus"},u):u}var Q="_DragHandle_mal28_1";function ee(e){return h.createElement("div",Object.assign({className:Q},e))}var te="_FieldInput_e69u7_1",ne="_FieldHelp_e69u7_18",re="_FieldWrapper_e69u7_24",ae="_FieldIcon_e69u7_28",ie="_Label_1l7k6_1";function le(e){var t=e.className,n=(0,v.Z)(e,R);return h.createElement("label",Object.assign({className:(0,y.Z)(t,ie)},n))}function oe(e){var t=e.children,n=e.label,r=e.help,a=e.type,i=void 0===a?"text":a,l=e.options,o=e.tooltip,c=e.icon,u=(0,v.Z)(e,O);if(console.log({props:u,type:i}),!t)if(l)t=h.createElement("select",Object.assign({},u,{className:(0,y.Z)(u.className,te)}),l.map((function(e,t){return h.createElement("option",{value:e.value,key:t},e.label)})));else if(["text","number"].includes(i))t=h.createElement("input",Object.assign({},u,{className:(0,y.Z)(u.className,te)}));else{if("textarea"!==i)throw new Error("Cannot render this type of field : "+i);t=h.createElement("textarea",Object.assign({},u,{className:(0,y.Z)(u.className,te)}))}return o&&(t=h.createElement(X,{content:o},t)),h.createElement("div",null,n&&h.createElement(le,{htmlFor:u.id},n),h.createElement("div",{className:re},t,c&&h.createElement("div",{className:ae},c)),r&&h.createElement("div",{className:ne},r))}var ce="_ModalOverlay_1bf7g_1",ue="_ModalContent_1bf7g_9",se="_ModalTitle_1bf7g_25",de="_ModalClose_1bf7g_32";function fe(e){if(e)return function(t){t.preventDefault(),e(t)}}function me(e){if(e)return function(t){t.preventDefault(),t.stopPropagation(),e(t)}}function ve(e){var t=e.children,n=e.title,r=e.visible,a=e.onVisibilityChange;return h.createElement(C.fC,{open:r,onOpenChange:a},h.createElement(C.aV,{className:ce}),h.createElement(C.VY,{className:ue},h.createElement(C.Dx,{className:se},n),h.createElement("div",null,t),h.createElement($,{className:de,onClick:fe((function(){return a(!1)}))},h.createElement(Fe,{size:16}))))}var pe="_Tabs_1sadw_1",he="_Tab_1sadw_1",ge="_TabSelected_1sadw_17";function be(e){var t,n=e.children,r=e.className,a=h.Children.toArray(n),i=(0,h.useState)(null==(t=a[0])?void 0:t.props.title),l=i[0],o=i[1];return h.createElement(x.mQ,{value:l,onValueChange:o},h.createElement(x.dr,{className:(0,y.Z)(pe,r)},a.map((function(e){return h.createElement(x.SP,{className:(0,y.Z)(he,l===e.props.title&&ge),value:e.props.title,key:e.props.title},e.props.title)}))),a.map((function(e){return h.createElement(x.nU,{key:e.props.title,value:e.props.title},e.props.children)})))}be.Tab=function(e){var t=e.children;return h.createElement("div",null,t)};var _e="_Flex_6pm0u_1",Ee="_FlexBetween_6pm0u_9",we="_FlexColumn_6pm0u_13",ye=(0,h.forwardRef)((function(e,t){var n=e.as,r=void 0===n?"div":n,a=e.between,i=e.gap,l=e.children,o=e.className,c=e.column,u=e.style,s=(0,v.Z)(e,H),d=void 0!==i?Object.assign({"--ve-gap":i+"rem"},u):u;return h.createElement(r,Object.assign({},s,{ref:t,className:(0,y.Z)(_e,a&&Ee,c&&we,o),style:d}),l)}));ye.displayName="Flex";var ke="_Flash_p3se7_1",Ce="_FlashProgress_p3se7_14",xe="_FlashButton_p3se7_26",Ne="_FlashIn_p3se7_31",ze="_FlashOut_p3se7_35";function Be(){var e,t=(0,h.useRef)(!1),n=(0,h.useState)(0),r=n[0],a=n[1];e=function(){return t.current=!0},(0,h.useEffect)((function(){return function(){return e()}}),[]);var i=(0,h.useCallback)((function(){!t.current&&a(r+1)}),[r]);return[(0,h.useCallback)((function(){return N.ZP.postRender(i)}),[i]),r]}var Le=function(e){var t,n,r=e.children,a=e.isPresent,i=e.onExitComplete,l=e.in,o=e.out,c=(t=Me,null===(n=(0,h.useRef)(null)).current&&(n.current=t()),n.current);return(0,h.useMemo)((function(){c.forEach((function(e,t){return c.set(t,!1)}))}),[a]),h.cloneElement(r,{className:(0,y.Z)(r.props.className,a?l:o),onAnimationEnd:a?null:i})};function Me(){return new Map}var Se=(0,h.createContext)({});function Pe(e){return e.key||""}var Ze=function(e){var t=e.children,n=e.in,r=e.out,a=e.exitBeforeEnter,i=Be()[0],l=(0,h.useContext)(Se).forceRender;l&&(i=l);var o=(0,h.useRef)(!0),c=(0,h.useRef)(!0);(0,h.useEffect)((function(){return function(){c.current=!1}}),[]);var u=function(e){var t=[];return h.Children.forEach(e,(function(e){(0,h.isValidElement)(e)&&t.push(e)})),t}(t),s=(0,h.useRef)(u),d=(0,h.useRef)(new Map).current,f=(0,h.useRef)(new Set).current;if(function(e,t){var n=new Set;e.forEach((function(e){var r=Pe(e);n&&(n.has(r)&&console.warn('Children of AnimatePresence require unique keys. "'+r+'" is a duplicate.'),n.add(r)),t.set(r,e)}))}(u,d),o.current)return o.current=!1,h.createElement(h.Fragment,null,u.map((function(e){return h.createElement(Le,{key:Pe(e),isPresent:!0,in:n,out:r},e)})));for(var m=[].concat(u),v=s.current.map(Pe),p=u.map(Pe),g=v.length,b=0;b<g;b++){var _=v[b]||"";-1===p.indexOf(_)?f.add(_):f.delete(_)}return a&&f.size&&(m=[]),f.forEach((function(e){if(-1===p.indexOf(e)){var t=d.get(e);if(t){var a=v.indexOf(e);m.splice(a,0,h.createElement(Le,{key:Pe(t),isPresent:!1,onExitComplete:function(){d.delete(e),f.delete(e);var t=s.current.findIndex((function(t){return t.key===e}));if(s.current.splice(t,1),!f.size){if(s.current=u,!c.current)return;i()}},in:n,out:r},t))}}})),m=m.map((function(e){var t=e.key;return f.has(t)?e:h.createElement(Le,{key:Pe(e),isPresent:!0,in:n,out:r},e)})),s.current=m,a&&m.length>1&&console.warn("You're attempting to animate multiple children within AnimatePresence, but its exitBeforeEnter prop is set to true. This will lead to odd visual behaviour."),h.createElement(h.Fragment,null,f.size?m:m.map((function(e){return(0,h.cloneElement)(e)})))};function Te(e){var t=e.children,n=e.action,r=e.onClick,a=e.duration,i=e.onHide,l=e.className;return h.createElement(Ze,{in:Ne,out:ze},t&&h.createElement(ye,{between:!0,className:(0,y.Z)(ke,l)},h.createElement("div",null,t),n&&h.createElement(G,{size:"small",className:xe,onClick:fe(r)},n),a&&h.createElement("div",{onAnimationEnd:me(i),className:Ce,style:{animationDuration:a+"s"}})))}function Ae(e){var t=e.size,n=void 0===t?18:t;return h.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:n,height:n},h.createElement("path",{fill:"currentColor",d:"M7 4v16h10V4H7zM6 2h12a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V3a1 1 0 0 1 1-1zm6 15a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"}))}function Re(e){var t=e.size,n=void 0===t?24:t;return h.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:n,height:n},h.createElement("path",{fill:"currentColor",d:"M4 16h16V5H4v11zm9 2v2h4v2H7v-2h4v-2H2.992A.998.998 0 0 1 2 16.993V4.007C2 3.451 2.455 3 2.992 3h18.016c.548 0 .992.449.992 1.007v12.986c0 .556-.455 1.007-.992 1.007H13z"}))}function Oe(e){var t=e.size,n=void 0===t?18:t;return h.createElement("svg",{width:n,height:n,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 16 16"},h.createElement("path",{fill:"currentColor",d:"M13.315 2.716A7.461 7.461 0 102.763 13.268 7.461 7.461 0 0013.315 2.716zM8.039 14.454a6.468 6.468 0 01-6.46-6.46 6.468 6.468 0 016.46-6.462A6.468 6.468 0 0114.5 7.992a6.468 6.468 0 01-6.46 6.461z"}),h.createElement("path",{fill:"currentColor",d:"M6.915 9.556L4.62 7.262l-.708.707 3.002 3.002 5.234-5.235-.707-.707-4.527 4.527z"}))}function He(e){var t=e.size,n=void 0===t?24:t;return h.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:n,height:n},h.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),h.createElement("path",{d:"M11 11V7h2v4h4v2h-4v4h-2v-4H7v-2h4zm1 11C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm0-2a8 8 0 1 0 0-16 8 8 0 0 0 0 16z",fill:"currentColor"}))}function je(e){var t=e.size,n=void 0===t?24:t;return h.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:n,height:n},h.createElement("path",{d:"M12 13.172l4.95-4.95 1.414 1.414L12 16 5.636 9.636 7.05 8.222z",fill:"currentColor"}))}function Ie(e){var t=e.size,n=void 0===t?24:t;return h.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:n,height:n},h.createElement("path",{d:"M17 6h5v2h-2v13a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V8H2V6h5V3a1 1 0 0 1 1-1h8a1 1 0 0 1 1 1v3zm1 2H6v12h12V8zm-4.586 6l1.768 1.768-1.414 1.414L12 15.414l-1.768 1.768-1.414-1.414L10.586 14l-1.768-1.768 1.414-1.414L12 12.586l1.768-1.768 1.414 1.414L13.414 14zM9 4v2h6V4H9z",fill:"currentColor"}))}function Fe(e){var t=e.size,n=void 0===t?24:t;return h.createElement("svg",{width:n,height:n,viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},h.createElement("path",{d:"M6.99999 5.58599L11.95 0.635986L13.364 2.04999L8.41399 6.99999L13.364 11.95L11.95 13.364L6.99999 8.41399L2.04999 13.364L0.635986 11.95L5.58599 6.99999L0.635986 2.04999L2.04999 0.635986L6.99999 5.58599Z",fill:"currentColor"}))}function Ue(e){var t=e.size,n=void 0===t?24:t;return h.createElement("svg",{width:n,height:n,fill:"none",xmlns:"http://www.w3.org/2000/svg"},h.createElement("path",{d:"m11.02 10.078 2.856 2.855-.943.943-2.855-2.855A6.002 6.002 0 0 1 .333 6.334c0-3.313 2.688-6 6-6a6.002 6.002 0 0 1 4.688 9.744Zm-1.337-.495a4.665 4.665 0 0 0-3.35-7.917 4.665 4.665 0 0 0-4.666 4.667 4.665 4.665 0 0 0 7.916 3.35l.1-.1Z",fill:"currentColor"}))}function Ve(e){var t=e.size,n=void 0===t?24:t;return h.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:n,height:n},h.createElement("path",{fill:"currentColor",d:"M24 12l-5.657 5.657-1.414-1.414L21.172 12l-4.243-4.243 1.414-1.414L24 12zM2.828 12l4.243 4.243-1.414 1.414L0 12l5.657-5.657L7.07 7.757 2.828 12zm6.96 9H7.66l6.552-18h2.128L9.788 21z"}))}function De(e){var t=e.size,n=void 0===t?24:t;return h.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:n,height:n},h.createElement("path",{fill:"currentColor",d:"M3 21a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h7.414l2 2H20a1 1 0 0 1 1 1v3h-2V7h-7.414l-2-2H4v11.998L5.5 11h17l-2.31 9.243a1 1 0 0 1-.97.757H3zm16.938-8H7.062l-1.5 6h12.876l1.5-6z"}))}function We(e){var t=e.size,n=void 0===t?24:t;return h.createElement("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},h.createElement("path",{d:"M4.5 2.5L4.5 20.5L2.5 20.5L2.5 2.5L4.5 2.5ZM10.328 12.5L16.4 18.571L14.986 19.985L6.5 11.5L14.985 3.015L16.4 4.429L10.33 10.5L21.5 10.5L21.5 12.5L10.328 12.5Z",fill:"currentColor"}))}function qe(e){var t=e.items,n=e.children,r=e.onMove,a=t.map((function(e){return e._id})),i=(0,b.Dy)((0,b.VT)(b.we),(0,b.VT)(b.Lg,{coordinateGetter:E.is}));return h.createElement(b.LB,{sensors:i,collisionDetection:b.pE,onDragEnd:function(e){var t=e.active,n=e.over;n&&t.id!==n.id&&r(a.indexOf(t.id),a.indexOf(n.id))},modifiers:[_.DL,_.F4]},h.createElement(E.Fo,{items:a,strategy:E.qw},n))}function Je(e){var t=e.item,n=e.children,r=e.className,a=(0,v.Z)(e,j),i=(0,E.nB)({id:t._id}),l=i.attributes,o=i.listeners,c=i.setNodeRef,u=i.transform,s=i.transition,d=i.isDragging,f={transform:w.ux.Translate.toString(u),transition:s||void 0};return h.createElement("div",Object.assign({className:r,"data-dragging":!!d||void 0,ref:c,style:f},l,a),h.createElement(ee,Object.assign({},o)),n)}function Ye(e,t,n){return(0,E.Rp)(e,t,n)}function Ge(e,t,n){var r=[].concat(e);return r.splice(t,0,n),r}function Ke(e){return Array.isArray(e)?e:e.split(".")}function Xe(e,t,n){return t?Ke(t).reduceRight((function(t,n,r,a){var i,l,o,c,u=(i=e,l=a.slice(0,r),void 0===o&&(o=null),Ke(l).reduce((function(e,t){return e&&(Array.isArray(e)?e[parseInt(t)]:e[t])||o}),i));return Array.isArray(u)?u.map((function(e,r){return r.toString()===n?t:e})):Object.assign({},u,((c={})[n]=t,c))}),n):n}function $e(e){return JSON.stringify(e,(function(e,t){if("_id"!==e)return t}),2)}function Qe(e){return Array.isArray(e)?e.forEach((function(e,t){"object"==typeof e&&(e._id=t.toString(),Qe(e))})):"object"==typeof e&&null!==e&&Object.keys(e).forEach((function(t){return Qe(e[t])})),e}function et(e,t){if("boolean"==typeof t)return!!e;if("string"==typeof t)return"boolean"==typeof e?"":""+(null!=e?e:"");throw new Error("Cannot cast "+typeof e+" into a "+typeof t)}function tt(){return"_"+Math.random().toString(36).substr(2,9)}function nt(e){return(new DOMParser).parseFromString(e,"text/html").body.textContent}var rt=function(){function e(e,t){void 0===t&&(t={}),U(this,"fields"),U(this,"args"),U(this,"conditions",[]),U(this,"render",(function(){return(0,h.createElement)("div",{},"Vous devez impl\xe9menter la m\xe9thode render")})),this.fields=e,this.args=t}var t=e.prototype;return t.when=function(e,t){return void 0===t&&(t=!0),this.conditions.push((function(n){return"function"==typeof t?t(n[e]):et(n[e],t)===t})),this},t.shouldRender=function(e){return 0===this.conditions.filter((function(t){return!t(e)})).length},e}();function at(e,t){for(var n,r=Object.assign({},e),a=(0,m.Z)(t);!(n=a()).done;){var i=n.value;if(i instanceof rt)r=at(r,i.fields);else{var l=i.name;void 0===e[l]&&(r[l]=i.defaultValue)}}return r}var it="undefined"!=typeof localStorage?localStorage.getItem("veSidebarWidth"):0,lt=(0,L.Z)(),ot=lt.Provider,ct=lt.useStore;function ut(e){var t=e.children,n=e.data,r=e.definitions,a=e.hiddenCategories;return h.createElement(ot,{createStore:function(){return function(e,t,n){return void 0===e&&(e=[]),void 0===n&&(n=[]),(0,z.Z)((0,B.mW)((0,B.$e)({data:e,definitions:t,hiddenCategories:n,previousData:[],rollbackMessage:null,addBlockIndex:null,focusIndex:null,previewMode:1,sidebarWidth:(r=it?parseInt(it,10):600,a=0,i=window.innerWidth-375,Math.min(Math.max(r,a),i))},(function(e){return{setSidebarWidth:function(t){localStorage.setItem("veSidebarWidth",t.toString()),e((function(){return{sidebarWidth:t}}))},updateData:function(t,n){return e((function(e){return{data:Xe(e.data,n,t)}}))},removeBloc:function(t){return e((function(e){var n=e.data;return{previousData:n,data:n.filter((function(e){return e!==t})),rollbackMessage:"Le bloc a bien \xe9t\xe9 supprim\xe9"}}))},rollback:function(){return e((function(e){return{previousData:[],rollbackMessage:null,data:e.previousData}}))},voidRollback:function(){return e((function(){return{rollbackMessage:null,previousData:[]}}))},insertData:function(t,n,r){var a=Object.assign({},r,{_name:t,_id:t+tt()});return e((function(e){return{data:Ge(e.data,n,a),focusIndex:a._id}})),a},setFocusIndex:function(t){e((function(){return{focusIndex:t}}))},setAddBlockIndex:function(t){e((function(){return{addBlockIndex:t}}))},togglePreviewMode:function(){e((function(e){return{previewMode:1===e.previewMode?0:1}}))}}}))));var r,a,i}(n,r,a)}},t)}function st(){return ct((function(e){return e.data}))}function dt(){return ct((function(e){return e.updateData}))}function ft(){return ct((function(e){return e.removeBloc}))}function mt(){return ct((function(e){return e.insertData}))}function vt(){return ct((function(e){return e.setFocusIndex}))}function pt(e){return ct((function(t){return t.focusIndex===e}))}function ht(){return ct((function(e){return e.previewMode}))}function gt(){return ct((function(e){return e.definitions}))}function bt(){return ct((function(e){return e.setAddBlockIndex}))}function _t(){var e=mt(),t=ct((function(e){return e.addBlockIndex}))||0,n=ct((function(e){return e.definitions})),r=bt();return(0,h.useCallback)((function(a){e(a,t,at({},n[a].fields)),r(null)}),[e,t,n,r])}var Et="_Sidebar_1tt52_1",wt="_SidebarBlocs_1tt52_33",yt="_SidebarBloc_1tt52_33",kt="_SidebarBlocMissing_1tt52_52",Ct="_SidebarBlocBody_1tt52_57",xt="_SidebarHeading_1tt52_67",Nt="_SidebarHoverable_1tt52_85",zt="_SidebarHeader_1tt52_94";function Bt(e){void 0===e&&(e=!1);var t=(0,h.useState)(e),n=t[0],r=t[1];return[n,function(){return r((function(e){return!e}))},r]}function Lt(e,t){var n=(0,h.useRef)(!0);(0,h.useEffect)((function(){if(!n.current)return e();n.current=!1}),t)}function Mt(e,t){return void 0===t&&(t=0),e.offsetParent?Mt(e.offsetParent,t+e.offsetTop):t+e.offsetTop}var St=(0,h.forwardRef)((function(e,t){var n=e.children,r=e.onClick,a=e.title,i=e.description,l=r?"button":"div";return h.createElement(ye,{ref:t,gap:0,between:!0,className:xt},h.createElement(l,{className:xt,onClick:r},h.createElement("strong",null,a),i),n)}));function Pt(e){var t=e.data,n=ft();return h.createElement(Je,{item:t,className:(0,y.Z)(yt,kt)},h.createElement(St,{title:"Bloc inconnu : "+t._name},h.createElement($,{danger:!0,onClick:fe((function(){return n(t)})),title:"Supprimer l'\xe9l\xe9ment"},h.createElement(Ie,{size:20}))))}function Zt(e){var t=e.fields,n=e.data,r=e.path;return h.createElement(h.Fragment,null,t.filter((function(e){return e.shouldRender(n)})).map((function(e,t){return e instanceof rt?e.shouldRender(n)&&h.createElement(e.render,{key:t},h.createElement(Zt,{fields:e.fields,data:n,path:r})):e.shouldRender(n)&&h.createElement(Tt,{key:e.name,field:e,value:e.name?n[e.name]:void 0,path:r+"."+e.name,style:e.injectStyle(n)})})))}function Tt(e){var t=e.field,n=e.value,r=e.path,a=e.style,i=dt(),l=t.field,o=(0,h.useCallback)((function(e){i(e,r)}),[r]);return h.createElement("div",{style:a},h.createElement(l,{value:n,onChange:o}))}function At(e){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,f.Z)(p.mark((function e(t){var n;return p.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"clipboard-write",e.next=4,navigator.permissions.query({name:"clipboard-write"});case 4:if("granted"!=(n=e.sent).state&&"prompt"!=n.state){e.next=9;break}return e.next=8,navigator.clipboard.writeText(t);case 8:case 16:return e.abrupt("return",!0);case 9:throw n;case 12:return e.prev=12,e.t0=e.catch(0),e.next=16,navigator.clipboard.writeText(t);case 17:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}function Ot(e){var t=e.data,n=e.size,r=(0,v.Z)(e,I),a=(0,h.useState)(!1),i=a[0],l=a[1],o=(0,h.useRef)(),c=function(){var e=(0,f.Z)(p.mark((function e(){return p.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,At($e(t));case 3:l(!0),o.current=window.setTimeout((function(){l(!1)}),4e3),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),u=Array.isArray(t)?"Copier le code de la page":"Copier le  bloc";return(0,h.useEffect)((function(){clearTimeout(o.current)}),[]),h.createElement(X,{content:i?h.createElement(h.Fragment,null,"Le code a bi\xe9n \xe9t\xe9 copi\xe9",h.createElement("br",null),"vous pouvez le coller sur une autre page (CTRL + V)"):u,trigger:"focus"},h.createElement("div",null,h.createElement($,Object.assign({onClick:fe(c),success:i},r),i?h.createElement(Oe,{size:n}):h.createElement(Ve,{size:n}))))}St.displayName="SidebarHeading",St.Hover=function(e){var t=e.children;return h.createElement(ye,{className:Nt,gap:0},t)};var Ht=(0,h.memo)((function(e){var t=e.data,n=e.definition,r=e.path,a=(0,h.useRef)(null),i=pt(t._id),l=Bt(!i),o=l[0],c=l[1],u=l[2],s=ft(),d=vt(),f=null!=n&&n.label&&t[n.label]?t[n.label]:null;Lt((function(){i?(u(!1),window.setTimeout((function(){return a.current.scrollIntoView({behavior:"smooth",block:"start"})}),100)):u(!0)}),[i]);var m=(0,h.useMemo)((function(){return null!=f&&f.includes("<")?(e=f,document.createRange().createContextualFragment("<div>"+e.trim()+"</div>").firstChild).innerText:f;var e}),[f]);return n?h.createElement(Je,{item:t,className:yt},h.createElement(St,{ref:a,title:n.title,description:o?m:null,onClick:fe((function(){o&&d(r),c()}))},h.createElement(St.Hover,null,h.createElement(Ot,{data:t,size:20}),h.createElement($,{danger:!0,onClick:function(){s(t)},title:"Supprimer l'\xe9l\xe9ment"},h.createElement(Ie,{size:20}))),h.createElement($,{rotate:o?-90:0,onClick:fe(c)},h.createElement(je,{size:20}))),!o&&h.createElement(ye,{column:!0,gap:1,className:Ct},h.createElement(Zt,{fields:n.fields,data:t,path:r}))):h.createElement(Pt,{data:t})}));function jt(e){var t=e.data,n=dt(),r=gt();return h.createElement("div",{className:wt},h.createElement(qe,{items:t,onMove:function(e,r){n(Ye(t,e,r))}},t.map((function(e,t){return h.createElement(Ht,{key:e._id,data:e,definition:r[e._name],path:""+t})}))))}function It(e){var t=e.onClose,n=ct((function(e){return e.togglePreviewMode})),r=0===ht(),a=bt(),i=st();return h.createElement(ye,{className:zt,between:!0},h.createElement("div",null,h.createElement($,{title:"Fermer",onClick:fe(t)},h.createElement(Fe,{size:12}))),h.createElement(ye,null,h.createElement(Ot,{data:i,size:20}),h.createElement($,{onClick:fe(n),title:"Vue responsive"},r?h.createElement(Re,{size:20}):h.createElement(Ae,{size:24})),h.createElement(G,{icon:He,onClick:fe((function(){return a(0)}))},"Ajouter un bloc")))}function Ft(e){var t=e.data,n=e.onClose;return h.createElement("div",{className:Et},h.createElement(It,{onClose:n}),h.createElement(jt,{data:t}))}function Ut(e,t,n){var r=(0,h.useRef)(e),a=(0,h.useMemo)((function(){return e=function(){return r.current.apply(r,arguments)},t=n,a=null,function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var l=function(){a=null,e.apply(void 0,r)};a&&clearTimeout(a),a=window.setTimeout(l,t)};var e,t,a}),[]);r.current=e,(0,h.useEffect)((function(){a()}),t)}var Vt={Preview:"_Preview_1wfz1_6",PreviewIn:"_PreviewIn_1wfz1_1",PreviewLoaded:"_PreviewLoaded_1wfz1_26",PreviewSpinner:"_PreviewSpinner_1wfz1_30",PreviewPhone:"_PreviewPhone_1wfz1_35",PreviewAddButton:"_PreviewAddButton_1wfz1_40",PreviewAddBlock:"_PreviewAddBlock_1wfz1_114",PreviewBlockWrapper:"_PreviewBlockWrapper_1wfz1_127",PreviewBlock:"_PreviewBlock_1wfz1_127",PreviewBlockTitle:"_PreviewBlockTitle_1wfz1_141",PreviewBlockFocused:"_PreviewBlockFocused_1wfz1_154",PreviewBlockSpinner:"_PreviewBlockSpinner_1wfz1_171",PreviewOut:"_PreviewOut_1wfz1_1"},Dt="_Spinner_1h31b_1";function Wt(e){var t=e.className;return h.createElement("div",{className:(0,y.Z)(Dt,t)},h.createElement("svg",{viewBox:"0 0 60 60",fill:"none",xmlns:"http://www.w3.org/2000/svg"},h.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M30 60C46.5685 60 60 46.5685 60 30C60 13.4315 46.5685 0 30 0C13.4315 0 0 13.4315 0 30C0 46.5685 13.4315 60 30 60ZM30 50C41.0457 50 50 41.0457 50 30C50 18.9543 41.0457 10 30 10C18.9543 10 10 18.9543 10 30C10 41.0457 18.9543 50 30 50Z",fill:"url(#paint0_linear_313_15)"}),h.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 30H0C0 46.5685 13.4315 60 30 60V50C18.9543 50 10 41.0457 10 30Z",fill:"currentColor"}),h.createElement("defs",null,h.createElement("linearGradient",{id:"paint0_linear_313_15",x1:"30",y1:"30",x2:"17",y2:"30",gradientUnits:"userSpaceOnUse"},h.createElement("stop",{stopColor:"currentColor",stopOpacity:"0"}),h.createElement("stop",{offset:"0.198062",stopColor:"currentColor",stopOpacity:"0.217786"}),h.createElement("stop",{offset:"0.434425",stopColor:"currentColor",stopOpacity:"0.477687"}),h.createElement("stop",{offset:"1",stopColor:"currentColor"})))))}function qt(e){var t,n,r=e.data,a=e.previewUrl,i=(e.iconsUrl,(0,h.useRef)(null)),l=(0,h.useState)(null),o=l[0],c=l[1],u=(0,h.useRef)({}),s=Bt(),d=s[0],m=s[1];t=(0,f.Z)(p.mark((function e(){var t,n,l;return p.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return setTimeout(e,2e3)}));case 2:return e.next=4,fetch(a,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(r)});case 4:if((t=e.sent).ok){e.next=7;break}return e.abrupt("return");case 7:return(n=i.current.contentDocument).open(),e.t0=n,e.next=12,t.text();case 12:e.t1=e.sent,e.t0.write.call(e.t0,e.t1),n.close(),l=n.querySelector("#ve-components"),u.current=Array.from(l.children).reduce((function(e,t,n){var a;return Object.assign({},e,((a={})[r[n]._id]=t.outerHTML,a))}),{}),l.innerHTML="",c(l);case 19:case"end":return e.stop()}}),e)}))),n=[],(0,h.useEffect)((function(){t()}),n);var v=ht(),b=(0,S.Z)().height,_=void 0;return 0===v&&b<844&&(_={transform:"scale("+b/844+")"}),h.createElement("div",{className:(0,y.Z)(Vt.Preview,d&&Vt.PreviewLoaded,0===v&&Vt.PreviewPhone)},h.createElement(Wt,{className:Vt.PreviewSpinner}),h.createElement("iframe",{ref:i,style:_,onLoad:m}),o&&(0,g.createPortal)(h.createElement(Jt,{data:r,initialHTML:u.current,previewUrl:a}),o))}function Jt(e){var t=e.data,n=e.initialHTML,r=void 0===n?{}:n,a=e.previewUrl,i=gt(),l=bt();return h.createElement(h.Fragment,null,h.createElement(M.U5,{flipKey:t.map((function(e){return e._id})).join("_")},t.map((function(e,t){var n;return h.createElement("div",{key:e._id},h.createElement("button",{className:Vt.PreviewAddButton,onClick:fe((function(){return l(t)}))},h.createElement("span",null,"Ajouter un bloc")),h.createElement(Yt,{title:(null==(n=i[e._name])?void 0:n.title)||"",data:e,initialHTML:r[e._id]||"",previewUrl:a}))}))),h.createElement("div",{className:Vt.PreviewAddBlock},h.createElement(G,{icon:He,onClick:fe((function(){return l(t.length)}))},"Ajouter un bloc")))}function Yt(e){var t=e.data,n=e.initialHTML,r=e.previewUrl,a=e.title,i=(0,h.useRef)(null),l=function(e,t,n){var r=(0,h.useState)(!1),a=r[0],i=r[1],l=(0,h.useState)(n),o=l[0],c=l[1],u=(0,h.useRef)(!!n);return Ut((function(){if(!u.current){var n=window.setTimeout((function(){return i(!0)}),200);return fetch(t,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(Object.assign({},e,{preview:!0}))}).then((function(e){return e.text()})).then(c).finally((function(){clearTimeout(n),i(!1)})),function(){return clearTimeout(n)}}u.current=!1}),[e],500),{loading:a,html:o}}(t,r,n),o=l.loading,c=l.html,u=vt(),s=pt(t._id);return(0,h.useEffect)((function(){if(s){var e=Mt(i.current)-40;i.current.closest("html").scrollTop=e}}),[s]),h.createElement(M.$3,{flipId:t._id},h.createElement("div",{className:Vt.PreviewBlockWrapper,id:"previewItem"+t._id},h.createElement("div",{className:(0,y.Z)(Vt.PreviewBlock,o&&Vt.PreviewBlockLoading,s&&Vt.PreviewBlockFocused),ref:i,onClick:function(){return u(t._id)}},o&&h.createElement(Wt,{className:Vt.PreviewBlockSpinner}),h.createElement("div",{className:Vt.PreviewBlockTitle},a),h.createElement("div",{dangerouslySetInnerHTML:{__html:c}}))))}var Gt="_ResizeBar_1yvrt_1",Kt="_ResizeBarActive_1yvrt_14",Xt="_ResizeBarOverlay_1yvrt_18";function $t(){var e=(0,h.useState)(!1),t=e[0],n=e[1],r=ct((function(e){return e.setSidebarWidth}));return h.createElement(h.Fragment,null,h.createElement("div",{className:(0,y.Z)(Gt,t&&Kt),onMouseDown:function(e){e.stopPropagation(),e.preventDefault(),n(!0);var t=function(e){r(Math.round(100*e.clientX/window.innerWidth))};document.documentElement.addEventListener("mousemove",t),document.documentElement.addEventListener("mouseup",(function(){n(!1),document.documentElement.removeEventListener("mousemove",t)}),{once:!0})}}),t&&h.createElement("div",{className:Xt}))}var Qt="_BlocSelectorTabs_m0dmz_1",en="_BlocSelectorGrid_m0dmz_5",tn="_BlocSelectorItem_m0dmz_18",nn="_BlocSelectorItemImage_m0dmz_30",rn="_BlocSelectorSearchWrapper_m0dmz_96",an="_BlocSelectorSearch_m0dmz_96",ln="Tous les blocs";function on(e){var t=e.iconsUrl,n=null!==ct((function(e){return e.addBlockIndex})),r=bt(),a=(0,h.useState)(""),i=a[0],l=a[1],o=gt(),c=ct((function(e){return e.hiddenCategories})),u=_t(),s=(0,h.useMemo)((function(){return[ln].concat(Object.values(o).filter((function(e){return e.category})).filter((function(e){var t;return!c.includes(null!=(t=e.category)?t:"")})).reduce((function(e,t){return e.includes(t.category)?e:[].concat(e,[t.category])}),[]))}),[o]);if((0,h.useEffect)((function(){l("")}),[n]),!n)return null;return h.createElement(ve,{visible:n,onVisibilityChange:function(e){r(null)},title:"Ajouter un bloc"},h.createElement("div",{className:rn},h.createElement("input",{type:"search",placeholder:"Rechercher un bloc",value:i,onChange:function(e){return l(e.target.value)},className:an}),h.createElement(Ue,{size:14})),h.createElement(be,{className:Qt},s.map((function(e){return h.createElement(be.Tab,{key:e,title:e},h.createElement("div",{className:en},Object.keys(o).filter((function(e){var t;return!c.includes(null!=(t=o[e].category)?t:"")})).filter(function(e,t,n){return function(r){var a=t===ln||n[r].category===t,i=""===e||n[r].title.toLowerCase().includes(e.toLowerCase());return a&&i}}(null!=i?i:"",e,o)).map((function(e){return h.createElement(cn,{key:e,definition:o[e],name:e,iconsUrl:t,onClick:function(){return u(e)}})}))))}))))}function cn(e){var t=e.definition,n=e.name,r=e.iconsUrl,a=e.onClick,i=r.replace("[name]",n),l=t.title;return h.createElement("button",{className:tn,onClick:fe(a)},h.createElement("div",{className:nn},h.createElement("img",{src:i})),h.createElement("div",null,l))}var un="_LayoutWrapper_9vixo_1",sn="_Layout_9vixo_1",dn="_LayoutCollapseButton_9vixo_35",fn="_LayoutSidebarCollapsed_9vixo_50";function mn(){var e={message:ct((function(e){return e.rollbackMessage})),rollback:ct((function(e){return e.rollback})),voidRollback:ct((function(e){return e.voidRollback}))},t=e.message,n=e.rollback,r=e.voidRollback;return h.createElement(Te,{action:"R\xe9tablir",onClick:n,duration:3,onHide:r,children:t})}function vn(e){var t=e.data,n=e.previewUrl,r=e.onClose,a=e.iconsUrl,i=(0,h.useState)(!1),l=i[0],o=i[1],c=!l;return h.createElement(pn,null,h.createElement("div",{className:(0,y.Z)(sn,l&&fn)},h.createElement(Ft,{data:t,onClose:r}),n&&h.createElement(qt,{data:t,previewUrl:n,iconsUrl:a})),h.createElement($,{onClick:fe((function(){return o((function(e){return!e}))})),className:dn},h.createElement(We,{size:20})),c&&h.createElement($t,null),h.createElement(on,{iconsUrl:a}),h.createElement(mn,null))}function pn(e){var t=e.children,n=ct((function(e){return e.sidebarWidth}));return h.createElement("div",{className:un,style:{"--ve-sidebar":n+"vw"}},t)}function hn(e){return void 0===e&&(e=""),(0,h.useMemo)((function(){return e+tt()}),[])}var gn=function(){function e(e,t){U(this,"name"),U(this,"args"),U(this,"conditions",[]),U(this,"variables",null),this.name=e,this.args=Object.assign({},this.defaultArgs,t),this.field=this.field.bind(this)}var t=e.prototype;return t.field=function(e){e.value,e.onChange;throw Error("La m\xe9thode field doit \xeatre impl\xe9ment\xe9e")},t.when=function(e,t){return void 0===t&&(t=!0),this.conditions.push((function(n){return"function"==typeof t?t(n[e]):et(n[e],t)===t})),this},t.shouldRender=function(e){return 0===this.conditions.filter((function(t){return!t(e)})).length},t.injectStyle=function(e){var t=this;return this.variables?Object.keys(this.variables).reduce((function(n,r){var a,i=e[t.variables[r]];return i?Object.assign({},n,((a={})["--"+r]="var("+i+")",a)):n}),{}):null},(0,d.Z)(e,[{key:"defaultValue",get:function(){return this.args.default}},{key:"defaultArgs",get:function(){return{}}}]),e}(),bn=function(e){function t(){return e.apply(this,arguments)||this}return(0,s.Z)(t,e),t.prototype.field=function(e){var t=e.value,n=e.onChange,r=hn("textinput");return h.createElement(oe,{label:this.args.label,type:this.args.multiline?"textarea":"text",id:r,value:t,onInput:function(e){return n(e.target.value)},help:this.args.help})},(0,d.Z)(t,[{key:"defaultArgs",get:function(){return{default:""}}}]),t}(gn),_n="_Repeater_1j8wz_1",En="_RepeaterItem_1j8wz_9",wn="_RepeaterItemBody_1j8wz_19",yn="_RepeaterFooter_1j8wz_25",kn=function(e){function t(){var t;return t=e.apply(this,arguments)||this,U((0,u.Z)(t),"field",(function(e){var n=e.value,r=e.onChange,a=null!=n?n:[],i=!t.args.max||a.length<t.args.max,l=!t.args.min||a.length>t.args.min,o=function(e){r(a.filter((function(t){return t!==e})))},c=function(e,t){r(Xe(a,e,t))};return h.createElement(oe,{label:t.args.label},h.createElement(qe,{items:a,onMove:function(e,t){r(Ye(a,e,t))}},h.createElement("div",{className:_n},a.map((function(e,n){return h.createElement(t.fieldLine,{key:e._id,line:e,index:n,onUpdate:c,onRemove:l?o:null})})),i&&h.createElement("div",{className:yn},h.createElement(G,{secondary:!0,onClick:fe((function(){r([].concat(a,[at({_id:tt()},t.args.fields)]))})),icon:He},t.args.addLabel)))))})),U((0,u.Z)(t),"fieldLine",(function(e){var n=e.line,r=e.index,a=e.onRemove,i=e.onUpdate,l=Bt(!0),o=l[0],c=l[1],u=t.args.collapsed?n[t.args.collapsed]:"Element #"+(r+1),s=(0,h.useMemo)((function(){return nt(u)}),[u]);return h.createElement(Je,{item:n,className:En},h.createElement(St,{onClick:fe(c),title:s},h.createElement(St.Hover,null,a&&h.createElement($,{danger:!0,onClick:function(){return a(n)},title:"Supprimer l'\xe9l\xe9ment"},h.createElement(Ie,{size:20}))),h.createElement($,{rotate:o?-90:0,onClick:fe(c)},h.createElement(je,{size:24}))),!o&&h.createElement("div",{className:wn},h.createElement(t.fields,{fields:t.args.fields,line:n,index:r,onUpdate:function(e){return function(t){return i(e,t)}}})))})),U((0,u.Z)(t),"fields",(function(e){var n=e.fields,r=e.line,a=e.onUpdate,i=e.index;return h.createElement(h.Fragment,null,n.map((function(e,n){return h.createElement(t.fieldComponent,{key:n,field:e,line:r,onUpdate:a,index:i})})))})),U((0,u.Z)(t),"fieldComponent",(function(e){var n=e.field,r=e.line,a=e.onUpdate,i=e.index;return n.shouldRender(r)?n instanceof rt?h.createElement(n.render,null,h.createElement(t.fields,{fields:n.fields,line:r,onUpdate:a,index:i})):h.createElement(n.field,{value:r[n.name],onChange:a(i+"."+n.name)}):null})),t}return(0,s.Z)(t,e),(0,d.Z)(t,[{key:"defaultArgs",get:function(){return{addLabel:"Ajouter un \xe9l\xe9ment"}}},{key:"defaultValue",get:function(){for(var e,t=[],n=null!=(e=this.args.min)?e:0,r=0;r<n;r++)t.push(at({},this.args.fields));return Qe(t)}}]),t}(gn),Cn="_ImageUrlTooltip_1s3ny_1",xn="_ImageUrlBrowseButton_1s3ny_9",Nn="_ImageUrlInput_1s3ny_15",zn=function(e){function t(){return e.apply(this,arguments)||this}return(0,s.Z)(t,e),t.prototype.field=function(e){var t=this,n=e.value,r=e.onChange,a=hn("textinput");return h.createElement(oe,{id:a,label:this.args.label,help:this.args.help,value:n,tooltip:n?h.createElement(Bn,{url:n}):void 0,onChange:function(e){return r(e.target.value)},className:Nn,icon:this.args.onBrowse?h.createElement($,{onClick:fe((function(){t.args.onBrowse(n).then((function(e){r(e)})).catch((function(e){}))})),className:xn},h.createElement(De,{size:16})):void 0})},t}(gn);function Bn(e){var t=e.url;return t?h.createElement("img",{src:t,alt:"",className:Cn}):null}var Ln=function(){},Mn=null!=(r=null==P?void 0:P.import("delta"))?r:Ln,Sn=null!=(a=null==P?void 0:P.import("formats/bold"))?a:Ln,Pn=null!=(i=null==P?void 0:P.import("blots/break"))?i:Ln,Zn=null!=(l=null==P?void 0:P.import("blots/embed"))?l:Ln;function Tn(){var e=new Mn;return e.insert({break:""}),e}var An=function(e){function t(){return e.apply(this,arguments)||this}(0,s.Z)(t,e);var n=t.prototype;return n.length=function(){return 1},n.value=function(){return"\n"},n.insertInto=function(e,t){Zn.prototype.insertInto.call(this,e,t)},t}(Pn);U(An,"blotName","break"),U(An,"tagName","BR");var Rn=function(e){function t(){return e.apply(this,arguments)||this}return(0,s.Z)(t,e),t}(Sn);function On(e){return{key:13,shiftKey:!0,handler:function(t){if(e.current){var n=e.current.getLeaf(t.index)[0],r=e.current.getLeaf(t.index+1)[0];e.current.insertEmbed(t.index,"break",!0,"user"),null!==r&&n.parent===r.parent||e.current.insertEmbed(t.index,"break",!0,"user"),e.current.setSelection(t.index+1,0,P.sources.SILENT)}}}}U(Rn,"blotName","mark"),U(Rn,"tagName",["MARK"]),null==P||P.register(An),null==P||P.register(Rn);var Hn=((o={})[0]=[["bold","italic","underline"],["background","link","clean"]],o[1]=[["bold","italic","underline"],["background","link","clean"]],o[2]=[[{list:"ordered"},{list:"bullet"},"blockquote"],[{align:[]}],["bold","italic","underline","background","link","clean"]],o[3]=[[{header:[2,3,4,5,6,!1],blockquote:[]}],[{list:"ordered"},{list:"bullet"}],[{align:[]}],["bold","italic","underline","background","link","clean"]],o);function jn(e){var t=e.value,n=e.onChange,r=e.mode,a=void 0===r?1:r,i=e.placeholder,l=e.colors,o=(0,h.useRef)(null),c=(0,h.useRef)(null),u=(0,h.useRef)(n);return u.current=n,(0,h.useEffect)((function(){var e=Hn[a];l&&(e=[].concat(e,[[{color:l.map((function(e){return"var("+e+")"}))}]]));var n=new P(o.current,{modules:{clipboard:{matchers:[["BR",Tn]]},history:!0,keyboard:{bindings:{linebreak:On(c)}},toolbar:e},placeholder:i,theme:"bubble"});n.root.innerHTML=function(e){if(e.startsWith("<"))return e;return"<p>"+e+"</p>"}(t||""),n.on("text-change",(function(){u.current(0===a?function(e){if("<br>"===(e=e.trim().replaceAll("\n","<br>")))return"";return e}(c.current.root.firstChild.innerHTML):function(e){if("<p><br></p>"===e)return"";return e}(c.current.root.innerHTML))})),n.clipboard.addMatcher(Node.ELEMENT_NODE,(function(e,t){return function(e,t){for(var n,r=(0,m.Z)(e.ops);!(n=r()).done;){var a=n.value;a.insert&&a.attributes&&(delete a.attributes.align,delete a.attributes.color,delete a.attributes.background,[1,0].includes(t)&&(delete a.attributes.link,delete a.attributes.list),3!==t&&delete a.attributes.header,0===t&&"string"==typeof a.insert&&(a.insert=a.insert.replaceAll("\n","")))}return e}(t,a)})),0===a&&(n.keyboard.bindings[13]=[{key:"Enter",handler:function(){}}],n.clipboard.addMatcher("P",(function(e,t){var n=new Mn;return n.ops=t.ops.map((function(e){return"string"==typeof e.insert&&(e.insert=e.insert.replaceAll("\n","")),e})),n}))),n.getModule("toolbar").addHandler("background",(function(){n.format("mark",!0)})),c.current=n}),[]),h.createElement("div",{className:(0,y.Z)(0===a&&"ql-container-oneline"),ref:o})}var In="_HTMLText_8k9nw_1",Fn=function(e){function t(){var t;return t=e.apply(this,arguments)||this,U((0,u.Z)(t),"variables",{}),t}(0,s.Z)(t,e);var n=t.prototype;return n.field=function(e){var t=e.value,n=e.onChange;return h.createElement(oe,{label:this.args.label,help:this.args.help},h.createElement("div",{className:In},h.createElement(jn,{value:t||"",onChange:n,mode:this.fieldType(),colors:this.args.colors})))},n.background=function(e){return this.variables.background=e,this},n.color=function(e){return this.variables.color=e,this},n.fieldType=function(){return!1===this.args.multiline?0:this.args.allowHeadings?3:2},(0,d.Z)(t,[{key:"defaultArgs",get:function(){return{multiline:!0,allowHeadings:!1,default:""}}}]),t}(gn),Un="_ColorPickerButton_6trtw_1",Vn="_ColorPickerButtonSelected_6trtw_23",Dn="_ColorPickerPalette_6trtw_29",Wn="_ColorTransparent_6trtw_29",qn="_ColorPickerButtonTransparent_6trtw_29",Jn="_ColorPickerContent_6trtw_37",Yn=function(e){function t(){var t;return t=e.apply(this,arguments)||this,U((0,u.Z)(t),"palette",(function(e){var n=e.onChange;return h.createElement("div",{className:Dn,style:{"--children":t.args.colors.length+1}},h.createElement("button",{className:Wn,onClick:fe((function(){return n(null)}))}),t.args.colors.map((function(e){return h.createElement("button",{key:e,style:{"--ve-color":"var("+e+")"},onClick:fe((function(){return n(e)}))})})))})),t}return(0,s.Z)(t,e),t.prototype.field=function(e){var t=e.value,n=e.onChange,r=(0,h.useState)(!1),a=r[0],i=r[1];return h.createElement(oe,{label:this.args.label},h.createElement(Z.fC,{open:a,onOpenChange:function(){return i((function(e){return!e}))}},h.createElement(Z.xz,{className:(0,y.Z)(Un,a&&Vn,!t&&qn),style:t?{"--ve-selected-color":"var("+t+")"}:void 0}),h.createElement(Z.VY,{className:Jn,side:"top"},h.createElement(this.palette,{onChange:function(e){n(e),i(!1)}}),h.createElement(Z.Eh,null))))},t}(gn),Gn="_Row_otl7x_1",Kn=function(e){function t(){var t;return t=e.apply(this,arguments)||this,U((0,u.Z)(t),"render",(function(e){var n=e.children;return h.createElement(oe,{label:t.args.label},h.createElement(ye,{className:t.args.columns?void 0:Gn,style:t.args.columns?{display:"grid",gridTemplateColumns:t.args.columns}:void 0},n))})),t}return(0,s.Z)(t,e),t}(rt),Xn="_Alignments_ce3ow_1",$n="_AlignmentsButton_ce3ow_8";var Qn=function(e){function t(){return e.apply(this,arguments)||this}return(0,s.Z)(t,e),t.prototype.field=function(e){var t=e.value,n=e.onChange,r=hn("textinput");return h.createElement(oe,{id:r,label:this.args.label,help:this.args.help,options:this.args.options,value:t,onChange:function(e){return n(e.target.value)}})},(0,d.Z)(t,[{key:"defaultArgs",get:function(){return{default:""}}}]),t}(gn),er=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=e.call(this,r.reduce((function(e,t){return[].concat(e,t.fields)}),[]),{})||this,U((0,u.Z)(t),"tabs",[]),U((0,u.Z)(t),"render",(function(e){var n=e.children;return h.createElement(be,null,t.tabs.map((function(e){return h.createElement(be.Tab,{key:e.label,title:e.label},h.createElement(ye,{column:!0},function(e){return(0,h.cloneElement)(n,{fields:e.fields})}(e)))})))})),t.tabs=r,t}return(0,s.Z)(t,e),t}(rt),tr={left:function(e){var t=e.size,n=void 0===t?24:t;return h.createElement("svg",{width:n,height:n,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},h.createElement("path",{fill:"currentColor",d:"M3 8V6h8v2zM3 13v-2h18v2zM3 18v-2h14v2z"}))},center:function(e){var t=e.size,n=void 0===t?24:t;return h.createElement("svg",{width:n,height:n,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},h.createElement("path",{fill:"currentColor",d:"M8 8V6h8v2zM3 13v-2h18v2zM5 18v-2h14v2z"}))},right:function(e){var t=e.size,n=void 0===t?24:t;return h.createElement("svg",{width:n,height:n,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},h.createElement("path",{fill:"currentColor",d:"M11 8V6h10v2zM3 13v-2h18v2zM6 18v-2h15v2z"}))}},nr=function(e){function t(){return e.apply(this,arguments)||this}return(0,s.Z)(t,e),t.prototype.field=function(e){var t=e.value,n=e.onChange,r=function(e){n(e.target.value)},a=Object.keys(tr);return h.createElement(oe,{label:this.args.label},h.createElement("div",{className:Xn},a.map((function(e){return h.createElement(rr,{key:e,value:e,checked:t===e,onChange:r})}))))},(0,d.Z)(t,[{key:"defaultArgs",get:function(){return{default:"left"}}}]),t}(gn);function rr(e){var t=e.value,n=e.onChange,r=e.checked,a=tr[t];return h.createElement("div",{className:$n},h.createElement("input",{type:"radio",onChange:n,value:t,checked:r}),h.createElement("div",null,h.createElement(a,null)))}var ar={},ir=function(){function e(){}var t=e.prototype;return t.registerComponent=function(e,t){ar[e]=Object.assign({label:"title"},t)},t.defineElement=function(e){void 0===e&&(e="visual-editor"),customElements.define(e,lr)},e}(),lr=function(e){function t(){var t;return t=e.apply(this,arguments)||this,U((0,u.Z)(t),"_mounted",!1),U((0,u.Z)(t),"_data",null),U((0,u.Z)(t),"_value",""),t}(0,s.Z)(t,e);var n=t.prototype;return n.connectedCallback=function(){this._value=this.getAttribute("value")||"[]",this.render(),this._mounted=!0},n.attributeChangedCallback=function(e,t,n){if(!this._mounted)return!1;if("value"===e){if(n===this._value)return;this._value=n}this.render()},n.disconnectedCallback=function(){this._mounted=!1},n.parseValue=function(e){if(null===this._data)try{var t=JSON.parse(e);this._data=Qe(t).map((function(e){var t,n;return at(e,null!=(t=null==(n=ar[e._name])?void 0:n.fields)?t:[])}))}catch(n){console.error("Impossible de parser les donn\xe9es",e,n),alert("Impossible de parser les donn\xe9es de l'\xe9diteur visuel"),this._data=[]}return this._data},n.render=function(){var e,t,n,r,a,i=this,l=this.parseValue(this._value),o=null!=(e=null==(t=this.getAttribute("hidden-categories"))?void 0:t.split(";"))?e:[];g.render(h.createElement(ut,{data:l,definitions:ar,hiddenCategories:o},h.createElement(or,{element:this,value:l,previewUrl:null!=(n=this.getAttribute("preview"))?n:"",iconsUrl:null!=(r=this.getAttribute("iconsUrl"))?r:"/",name:null!=(a=this.getAttribute("name"))?a:"",visible:null===this.getAttribute("hidden"),onChange:function(e){i._value!==e&&(i._value=e,i.dispatchEvent(new CustomEvent("veChange",{detail:e})))}})),this)},(0,d.Z)(t,[{key:"value",get:function(){return this._value},set:function(e){e!==this._value&&(this._value=e,this._data=null,this.render())}}],[{key:"observedAttributes",get:function(){return["hidden","value"]}}]),t}((0,c.Z)(HTMLElement));function or(e){var t,n,r=e.value,a=e.previewUrl,i=e.name,l=e.element,o=e.iconsUrl,c=e.visible,u=e.onChange,s=(0,h.useRef)(!0),d=dt(),f=st(),m=function(e,t,n){void 0===t&&(t=700),void 0===n&&(n=!0);var r=(0,h.useState)(e),a=r[0],i=r[1];return(0,h.useEffect)((function(){if(!e||!n){var t=window.setTimeout((function(){return i(e)}),700);return function(){return window.clearTimeout(t)}}i(e)}),[e]),a}(c),v=function(){return null},p=(0,h.useMemo)((function(){return $e(f)}),[f]);return Lt((function(){s.current=!0,d(r)}),[r]),t=m,n=mt(),(0,h.useEffect)((function(){if(t){var e=function(e){try{var t=(e.clipboardData||window.clipboardData).getData("text").trim();if(t.startsWith("{")){e.preventDefault();var r=JSON.parse(t);r._name&&n(r._name,0,Qe(r))}else if(t.startsWith("[")){e.preventDefault();var a=JSON.parse(t);if(a.length>0)for(var i=a.length-1;i>=0;i--)n(a[i]._name,0,Qe(a[i]))}}catch(l){}};return document.addEventListener("paste",e),function(){document.removeEventListener("paste",e)}}}),[n,t]),(0,h.useEffect)((function(){s.current?s.current=!1:u(p)}),[p]),m?h.createElement(h.Fragment,null,h.createElement(vn,{data:f,onClose:function(){l.dispatchEvent(new Event("veClose"))},previewUrl:a,iconsUrl:o}),h.createElement("textarea",{hidden:!0,name:i,value:p,onChange:v})):h.createElement("textarea",{hidden:!0,name:i,value:p,onChange:v})}U(lr,"changeEventName","veChange");var cr=["--bs-blue","--bs-indigo","--bs-purple","--bs-pink","--bs-red","--bs-orange","--bs-yellow","--bs-green","--bs-teal:","--bs-cyan:","--bs-white","--bs-gray:","--bs-gray-dark","--bs-primary","--bs-secondary","--bs-success","--bs-info:","--bs-warning","--bs-danger","--bs-light","--bs-dark"],ur=function(e,t){return void 0===e&&(e="image"),void 0===t&&(t="image"),new zn(e,{label:t,onBrowse:function(e){return Promise.resolve("https://picsum.photos/425/458")}})},sr=function(){return new Kn([new bn("label",{label:"Libell\xe9",default:"Call to action"}),new bn("url",{label:"Lien"}),new Qn("type",{default:"primary",label:"type",options:[{label:"Primaire",value:"primary"},{label:"Secondaire",value:"secondary"}]})])},dr=function(e,t){return new Yn(e,{label:t,colors:cr})},fr=function(e,t){return void 0===e&&(e="title"),void 0===t&&(t="Titre"),new Kn([new Fn(e,{default:"Lorem ipsum dolor sit amet",label:t,multiline:!1,colors:cr}),new nr(e+"Align",{label:"Alignement"})],{columns:"1fr max-content"})},mr=function(e,t){return void 0===e&&(e="content"),void 0===t&&(t="Description"),new Fn(e,{label:t,default:"<p>Minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Lorem ipsum dolor sit amet.</p>",multiline:!0,colors:cr}).background("backgroundColor").color("textColor")},vr=function(e,t){return void 0===t&&(t=[]),[new er({label:"Contenu",fields:e},{label:"Apparence",fields:[].concat(t,[new Kn([dr("backgroundColor","Background color"),dr("textColor","Text color"),ur("background","Background"),ur("backgroundMobile","Background (mobile)")],{columns:"50px 50px 1fr 1fr"}),new Kn([new Qn("backgroundSize",{default:"cover",label:"Size",options:[{label:"Remplir",value:"cover"},{label:"Contenir",value:"contain"},{label:"Original",value:"auto"}]}),new Qn("backgroundRepeat",{default:"no-repeat",label:"Repeat",options:[{label:"Aucune",value:"no-repeat"},{label:"x",value:"repeat-x"},{label:"y",value:"repeat-y"},{label:"x & y",value:"repeat"}]}),new Qn("backgroundXPosition",{default:"center",label:"Position (X)",options:[{label:"Centrer",value:"center"},{label:"Gauche",value:"left"},{label:"Droite",value:"right"}]}),new Qn("backgroundYPosition",{default:"center",label:"Position (Y)",options:[{label:"Centrer",value:"center"},{label:"Haut",value:"top"},{label:"Bas",value:"bottom"}]})]).when("background",(function(e){return e})),new Range("padding",{label:"Vertical Padding",default:3})])})]},pr=new ir;pr.registerComponent("hero",{title:"Hero",fields:vr([fr(),mr(),new kn("buttons",{title:"Boutons",addLabel:"Add a new button",fields:[sr()]})])}),pr.registerComponent("pricing",{title:"Pricing",category:"Commerce",fields:vr([fr(),mr(),new kn("prices",{min:1,max:5,collapsed:"title",fields:[new Fn("title",{label:"Title",default:"Pro",multiline:!1}),new bn("price",{label:"Price",default:"15\u20ac"}),new bn("features",{label:"Features",multiline:!0}),sr()]})])}),pr.registerComponent("icons-columns",{title:"Icons columns",fields:vr([new kn("icons",{min:1,max:5,collapsed:"title",fields:[new bn("title",{label:"Title",default:"Featured title"}),mr()]})])}),pr.registerComponent("text",{title:"Formatted text",fields:[mr()]}),pr.defineElement()}}]);