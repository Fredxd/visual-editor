"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[348],{6279:function(e,a,t){t.r(a),t.d(a,{frontMatter:function(){return o},contentTitle:function(){return l},metadata:function(){return c},toc:function(){return d},default:function(){return u}});var n=t(5339),r=t(7318),i=(t(9231),t(4852)),s=["components"],o={},l="Laravel",c={unversionedId:"Examples/Laravel",id:"Examples/Laravel",title:"Laravel",description:"Here is a sample code to render the content of the block inside Laravel. Every page component is rendered with a view named after the identifier with passing the data as variables with an additional fields variable containing all the fields.",source:"@site/docs/Examples/Laravel.md",sourceDirName:"Examples",slug:"/Examples/Laravel",permalink:"/visual-editor/docs/Examples/Laravel",editUrl:"https://github.com/boxraiser/visual-editor/tree/main/docs/docs/Examples/Laravel.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Render the preview",permalink:"/visual-editor/docs/preview"}},d=[],p={toc:d};function u(e){var a=e.components,t=(0,r.Z)(e,s);return(0,i.kt)("wrapper",(0,n.Z)({},p,t,{components:a,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"laravel"},"Laravel"),(0,i.kt)("p",null,"Here is a sample code to render the content of the block inside Laravel. Every page component is rendered with a view named after the identifier with passing the data as variables with an additional ",(0,i.kt)("inlineCode",{parentName:"p"},"fields")," variable containing all the fields."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-php"},"class BlockRenderer\n{\n\n    /* \n    *  Interceptors acts as middlewares\n    *  and can transform the data with\n    *  the inject(string $blocName, array $data) method\n    */ \n    private static $interceptors = [\n        'my-block' => MyBlockInterceptor::class,\n    ];\n\n    public static function render($blocs): string\n    {\n        if (is_string($blocs)) {\n            $blocs = json_decode($blocs, true);\n        }\n        return collect($blocs)->map(function ($bloc) {\n            return self::renderBlock($bloc);\n        })->join('');\n    }\n\n    private static function renderBlock(array $data): string\n    {\n        $request = request();\n        $blocName = $data['_name'];\n        $data['isPreview'] = false;\n        if (isset(self::$interceptors[$blocName])) {\n            $data = app(self::$interceptors[$blocName])->inject($blocName, $data);\n        }\n        if ($request->route()->getName() === 'preview') {\n            $data['isPreview'] = true;\n        }\n        return view(\"front.blocs.{$blocName}\", array_merge(['fields' => $data], $data))->render();\n    }\n    \n}\n")))}u.isMDXComponent=!0}}]);